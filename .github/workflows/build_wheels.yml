# File: .github/workflows/build_wheels.yml
# This workflow uses the industry-standard `cibuildwheel` to build
# robust, portable binary wheels for Linux, macOS, and Windows.

name: Build and Release Wheels

on:
  # Run automatically when a new release is created on GitHub
  release:
    types: [published]
  # Allow manual triggering from the GitHub Actions tab
  workflow_dispatch:

jobs:
  build_and_release:
    name: Build wheels for ${{ matrix.os }}
    runs-on: ${{ matrix.os }}

    strategy:
      matrix:
        # Define the operating systems to build on
        os: [ubuntu-latest, macos-latest, windows-latest]

    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      # The core of the workflow: use cibuildwheel
      - name: Build wheels
        uses: pypa/cibuildwheel@v2.16.5
        # Environment variables can be used to configure the build
        # env:
        #   CIBW_BUILD: "cp38-*"  # Example: build only for Python 3.8

      # This step takes the wheels built by cibuildwheel (located in ./wheelhouse)
      # and uploads them directly to the GitHub Release that triggered the workflow.
      - name: Upload wheels to GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          files: ./wheelhouse/*.whl```

---

### `pyproject.toml`

```toml
# File: pyproject.toml
# Specifies the build system and its dependencies. This is the modern
# standard (PEP 517/518) that tells pip what to install *before*
# trying to run setup.py.

[build-system]
requires = [
    "setuptools>=61.0",
    "wheel",
    "cython>=0.29.0",
    "numpy>=1.20.0"
]
build-backend = "setuptools.build_meta"